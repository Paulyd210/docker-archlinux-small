{"name":"Docker-archlinux-small","tagline":"126 MB Docker Container - Arch Linux, ArchAssault, BlackArch, BBQLinux and more.","body":"# archlinux-small\r\n\r\nOn Docker hub [archlinux-small](https://registry.hub.docker.com/u/yantis/archlinux-small/)\r\non Github [docker-archlinux-small](https://github.com/yantis/docker-archlinux-small)\r\n\r\nThis small layer adds 30MB to the 97MB Arch Linux base container [archlinux-tiny](https://registry.hub.docker.com/u/yantis/archlinux-tiny/)\r\nStill extremely small compared to other Arch Linux containers with some more features and packages above the tiny one.\r\nThe goal this was to have a more usable base that just worked without having to install dependencies for normal tasks as well as some normal tools I like working with.\r\nIt also has some amazing repos like [ArchAssault](https://www.archassault.org),\r\n[BlackArch](http://blackarch.org) and [BBQLinux](http://bbqlinux.org).\r\n\r\n### Docker Images Structure\r\n>[yantis/archlinux-tiny](https://github.com/yantis/docker-archlinux-tiny)\r\n>>[yantis/archlinux-small](https://github.com/yantis/docker-archlinux-small)\r\n>>>[yantis/archlinux-small-ssh-hpn](https://github.com/yantis/docker-archlinux-ssh-hpn)\r\n>>>>[yantis/ssh-hpn-x](https://github.com/yantis/docker-ssh-hpn-x)\r\n>>>>>[yantis/dynamic-video](https://github.com/yantis/docker-dynamic-video)\r\n>>>>>>[yantis/virtualgl](https://github.com/yantis/docker-virtualgl)\r\n>>>>>>>[yantis/wine](https://github.com/yantis/docker-wine)\r\n\r\n## Added Features\r\n* Lots of linux utlities that were not included in the tiny version. See list below.\r\n* util-linux & iputils\r\n* user:docker password:docker with password-less sudo.\r\n* locate/updatedb (mlocate)\r\n* [S6 supervisor] (http://skarnet.org/software/s6/) - ([Les Aker's code](https://github.com/amylum/s6))\r\n* [execline] (http://skarnet.org/software/execline/)\r\n* [zsh](http://www.zsh.org/) with [oh-my-zsh](https://github.com/robbyrussell/oh-my-zsh) setup for both root and docker users.\r\n* [htop](http://hisham.hm/htop/)\r\n* vim ([vim-tiny](http://askubuntu.com/questions/104138/what-features-does-vim-tiny-have))\r\n\r\n## Features (from [archlinux-tiny](https://registry.hub.docker.com/u/yantis/archlinux-tiny/))\r\n* Arch Linux 64 bit core, extra, community repos\r\n* Arch Linux 32 bit multilib repo\r\n* [BBQLinux](http://bbqlinux.org) repo for Android Developers.\r\n* [ArchAssault](https://www.archassault.org) repo for penetration testers and security professionals.\r\n* [BlackArch](http://blackarch.org) repo for penetration testers and security professionals.\r\n* [Arch Linux CN](https://github.com/archlinuxcn) repo \r\n* [Reflector] (https://wiki.archlinux.org/index.php/Reflector) mirror optimized for western USA.\r\n* cower and package-query for interacting with the AUR. \r\n* compact (removal of a lot of unneeded stuff that pacman will auto re-install if needed)\r\n\r\n\r\nAs an example this is a search for chrome with the above repos installed:\r\n![](http://yantis-scripts.s3.amazonaws.com/screenshot_20150407-030717.jpg)\r\n\r\n## Added packages\r\n* diffutils 3.3-2\r\n* execline 2.1.1.0_15-1\r\n* expac 4-3\r\n* file 5.22-1\r\n* gcc-libs 4.9.2-4\r\n* gdbm 1.11-1\r\n* glib2 2.42.2-1\r\n* grep 2.21-2\r\n* gzip 1.6-1\r\n* htop 1.0.3-2\r\n* iputils 20121221-3\r\n* less 471-1\r\n* libsystemd 218-2\r\n* lz4 128-1\r\n* mlocate 0.26-5\r\n* oh-my-zsh-git 3110.75b9030-1\r\n* patch 2.7.5-1\r\n* pcre 8.36-2\r\n* procps-ng-nosystemd 3.3.10-1\r\n* s6 2.1.3.0_22-1\r\n* sed 4.2.2-3\r\n* shadow 4.2.1-3\r\n* sudo 1.8.13-1\r\n* sysfsutils 2.1.0-9\r\n* tar 1.28-1\r\n* util-linux 2.26.1-3\r\n* vim-tiny 7.4.691-1\r\n* wget 1.16.3-1\r\n* zsh 5.0.7-1\r\n\r\n## Included from [archlinux-tiny](https://registry.hub.docker.com/u/yantis/archlinux-tiny/)\r\n* acl 2.2.52-2\r\n* archassault-keyring 20140202-3\r\n* archassault-mirrorlist 20150214-1\r\n* archlinux-keyring 20150212-1\r\n* archlinuxcn-keyring 20141118-1\r\n* attr 2.4.47-1\r\n* bash 4.3.033-1\r\n* bbqlinux-keyring 20131129-1\r\n* blackarch-keyring 20140118-3\r\n* bzip2 1.0.6-5\r\n* ca-certificates 20140923-9\r\n* ca-certificates-cacert 20140824-2\r\n* ca-certificates-mozilla 3.18-3\r\n* ca-certificates-utils 20140923-9\r\n* coreutils 8.23-1\r\n* cower 12-2\r\n* cracklib 2.9.1-1\r\n* curl 7.41.0-1\r\n* e2fsprogs 1.42.12-2\r\n* expat 2.1.0-4\r\n* filesystem 2015.02-1\r\n* findutils 4.4.2-6\r\n* gawk 4.1.1-1\r\n* gcc-libs 4.9.2-4\r\n* glibc 2.21-2\r\n* gmp 6.0.0-2\r\n* gnupg 2.1.2-3\r\n* gnutls 3.3.14-2\r\n* gpgme 1.5.3-1\r\n* iana-etc 2.30-4\r\n* keyutils 1.5.9-1\r\n* krb5 1.13.1-1\r\n* libarchive 3.1.2-8\r\n* libassuan 2.1.3-1\r\n* libcap 2.24-2\r\n* libffi 3.2.1-1\r\n* libgcrypt 1.6.3-2\r\n* libgpg-error 1.18-1\r\n* libidn 1.30-1\r\n* libksba 1.3.2-1\r\n* libldap 2.4.40-2\r\n* libsasl 2.1.26-7\r\n* libssh2 1.4.3-2\r\n* libtasn1 4.4-1\r\n* libtirpc 0.2.5-1\r\n* libutil-linux 2.26.1-3\r\n* licenses 20140629-1\r\n* linux-api-headers 3.18.5-1\r\n* localepurge 0.7.3.4-1\r\n* lzo 2.09-1\r\n* mpfr 3.1.2.p11-1\r\n* ncurses 5.9-7\r\n* nettle 2.7.1-1\r\n* npth 1.1-1\r\n* openssl 1.0.2.a-1\r\n* p11-kit 0.23.1-2\r\n* package-query 1.5-2\r\n* pacman 4.2.1-1\r\n* pacman-mirrorlist 20150315-1\r\n* pam 1.1.8-5\r\n* pambase 20130928-1\r\n* pinentry 0.9.0-1\r\n* pth 2.0.7-5\r\n* readline 6.3.006-1\r\n* texinfo-fake 1.2-1\r\n* tzdata 2015b-1\r\n* xz 5.2.1-1\r\n* yajl 2.1.0-1\r\n* zlib 1.2.8-3\r\n\r\n## How did you get it so small.\r\nThe biggest win was the removal of Perl at 40MB. Perl is needed for two things on the base Arch Linux install\r\nOpenSSL (it shouldn't be honestly since it isn't really used other than for one small thing on Windows)\r\nSome other distros have already fixed this [issue] (https://github.com/NixOS/nixpkgs/issues/6763) like NixOS \r\nAlso, see this [thread](https://bbs.archlinux.org/viewtopic.php?id=73200) and [this](https://bugs.archlinux.org/task/14903).\r\nAnd for [texinfo](http://www.gnu.org/software/texinfo) (8 MB) which we patched out with a fake stub.\r\n\r\nAs well as a lot of aggressively cleaning of info, doc and man pages as well as stripping out the non English international stuff.\r\n\r\n## Caveats\r\nThis is slimmed down as much as possible while still having full pacman functionality to install any package needed.\r\n\r\nWhere it might break is all but the English locales have been removed, as well as any terminfo configs that are not xterm based.\r\nDo not expect any info, documents or manual pages to exist locally either as those have been purged as well.\r\n\r\nI am currently experimenting with the removal of zoneinfo and i18n and no problems so far.\r\n\r\nAnything you install with pacman should just install fine but if you want to install something from the AUR you are going to need\r\nto install dev tools first like make, gcc, autoconf etc.\r\n\r\n\r\n## Miscellaneous\r\n\r\nTo save on space the pacman databases are purged. You need run pacman -Sy at least once before using pacman.\r\n\r\n```bash\r\nRUN pacman -Sy\r\n```\r\n\r\nIf you are building a package from the AUR you will want to install and uninstall the dev tools like this.\r\n\r\n```bash\r\nRUN sudo pacman -S --noconfirm yaourt binutils gcc make autoconf fakeroot && \\\r\n    yaourt -S --noconfirm procps-ng-nosystemd && \\\r\n    pacman --noconfirm -Rs yaourt binutils gcc make autoconf fakeroot\r\n```\r\n\r\nThis image has a user docker with the password docker. You will most likely want to change the password. Just add this line to your Dockerfile.\r\n\r\n```bash\r\nRUN echo -e \"docker\\nyournewpassword\" | passwd docker\r\n```\r\n\r\nThe mirrors are optimized for US West  If you want it for your area just add this to the top of your Dockerfile.\r\n\r\n```bash\r\nRUN pacman -S reflector --noconfirm && \\\r\n    reflector --verbose -l 5 --protocol https --sort rate --save /etc/pacman.d/mirrorlist && \\\r\n    pacman -Rs reflector --noconfirm\r\n```\r\n\r\nThe different repositories have a lot of really nice packages. To get a list just run package-query like this.\r\n\r\n```bash\r\npackage-query -Sl archassault\r\n```\r\n\r\n![](http://yantis-scripts.s3.amazonaws.com/screenshot_20150407-023220.jpg)\r\n","google":"UA-61848149-1","note":"Don't delete this file! It's used internally to help with page regeneration."}